const gLoaderElement=document.querySelector(".loader"),gNonLoaderElements=document.querySelector("#non-loader"),getStartedForm=document.querySelector("#getStartedForm"),welcomePage=document.querySelector("#main"),appPage=document.querySelector("#plan-app"),gUserName=document.querySelector("#name"),ctaWrapper=document.querySelector(".cta-wrapper"),taskAdderForm=document.querySelector("#taskAdderForm"),taskTimer=document.querySelector("#taskTimer"),timelineContainer=document.querySelector("#timeline"),timelineList=document.querySelector("#timeline-list"),completedTasks=document.querySelector("#completedTasks"),errorMsg=document.createElement("span");errorMsg.className="error-text",errorMsg.textContent="* Please enter your name first.";const welcomeMsg=document.createElement("p");welcomeMsg.className="description";const noTasksMsg=document.createElement("p");noTasksMsg.className="no-tasks",noTasksMsg.textContent="You don't have any tasks to complete yet.";let gCounter=0;loadEventListeners();function loadEventListeners(){document.addEventListener("DOMContentLoaded",appInit),timelineList.addEventListener("click",taskModifier),completedTasks.addEventListener("click",removeCompletedTask)}function appInit(){checkUserExists()?loadToDoAppDirectly():showHomePage()}function showHomePage(){gNonLoaderElements.style.display="none",gLoaderElement.style.display="block",setTimeout(function(){gNonLoaderElements.style.display="block",gLoaderElement.style.display="none"},1e3),getStartedForm.addEventListener("submit",loadToDoApp)}function loadToDoApp(a){a.preventDefault(),""===gUserName.value?!ctaWrapper.firstElementChild.isSameNode(errorMsg)&&ctaWrapper.insertBefore(errorMsg,ctaWrapper.firstChild):(localStorage.setItem("username",JSON.stringify(gUserName.value)),loadToDoAppDirectly())}function loadToDoAppDirectly(){const a=getUserNameFromLS();showLoaderForApp(),welcomeMsg.textContent=`Welcome ${a}`,taskAdderForm.parentElement.previousElementSibling.firstElementChild.appendChild(welcomeMsg);const b=getTasksFromLS();b.length?loadTasksForDOM():timelineContainer.insertBefore(noTasksMsg,timelineContainer.firstElementChild),taskAdderForm.addEventListener("submit",addTask)}function addTask(a){a.preventDefault();const b=validateTaskForm();if(b){const a=new Date;taskTimerArr=taskTimer.value.split(":");let b=a.getMinutes();10>b&&(b="0"+b);const c={id:generateUniqueID(),description:taskAdderForm.firstElementChild.value,priority:taskAdderForm.children[2].children[0].value,isComplete:!1,reminder:{h:+taskTimerArr[0],m:+taskTimerArr[1]},date_created:{day:a.getDate(),month:a.getMonth(),year:a.getFullYear()},time_created:{h:a.getHours(),m:b}};addTaskToLS(c);try{isTaskPendingInLS();timelineContainer.removeChild(noTasksMsg)}catch(a){console.log()}setTimeout(function(){addTaskToDOM(),taskAdderForm.reset()},1e3)}}function taskModifier(a){let b;if("deleteTask"===a.target.parentElement.parentElement.className){a.preventDefault(),b=a.target.parentElement.parentElement.getAttribute("data-id"),a.target.parentElement.parentElement.parentElement.parentElement.parentElement.remove(),removeTaskFromLS(b);const c=getTasksFromLS();0==c.length&&timelineContainer.appendChild(noTasksMsg)}if("isTaskComplete"===a.target.className){b=a.target.getAttribute("data-id"),taskCompleted(b),a.target.parentElement.parentElement.parentElement.remove();const c=isTaskPendingInLS();c&&timelineContainer.insertBefore(noTasksMsg,timelineContainer.firstChild)}}function removeCompletedTask(a){a.preventDefault();let b=a.target.parentElement.parentElement.getAttribute("data-id");a.target.parentElement.parentElement.parentElement.parentElement.remove(),removeTaskFromLS(b)}function taskCompleted(a){const b=getTasksFromLS();b.forEach(b=>{b.id==a&&(b.isComplete=!0)}),addTaskToCompletedList(a),updateLSTasks(b)}function addTaskToCompletedList(a){const b=document.createElement("div");b.className="completed-task-card";const c=getTaskFromLSUsingId(a);b.innerHTML=`
